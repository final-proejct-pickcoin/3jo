<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.finalproject.pickcoin.repository.InquiryRepository">

  <insert id="insert"
          parameterType="com.finalproject.pickcoin.domain.Inquiry"
          useGeneratedKeys="true" keyProperty="inquiry_id">
    INSERT INTO inquiry
    <trim prefix="(" suffix=")" suffixOverrides=",">
      user_id,
      category,
      amount,
      created_at,
      closed_at,
      <if test="status != null">status,</if>
    </trim>
    <trim prefix="VALUES (" suffix=")" suffixOverrides=",">
      #{user_id},
      #{category},
      #{amount, jdbcType=DECIMAL},
      COALESCE(#{createdAt, jdbcType=TIMESTAMP}, NOW()),
      #{closedAt, jdbcType=TIMESTAMP},
      <if test="status != null">#{status}</if>
    </trim>
  </insert>

</mapper>
